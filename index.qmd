---
title: "Regulatory Repositories"
author:
  - name: Coline Zeballos
    affiliations: 
      - name: Roche
  - name: Yann Féat
    affiliations:
      - name: mainanalytics
---

## Introduction

- R has a meticulously maintained ecosystem, which is immensely valuable in a regulatory space
- In a regulatory setting, the trust of any software needs to be thoroughly documented (NOTE: replace with more precise wording based on HA documents)

::: {.notes}
Coline
:::

## Goals

- Provide a community-maintained catalog of package quality indicators ("risk metrics")
- Serve quality indicators in a standard format
- Thoroughly document the system used to perform quality assessment
- Demonstrate how regulatory-ready risk assessments can be provided using public quality indicators
- Serve subsets of packages that conform to a specified risk tolerance
- Improve transparency of industry R package adoption, endorsement and regulator interaction

::: {.notes}
Coline
:::

## An evolving R ecosystem

- (NOTE: show interaction between CRAN, RVH Reg R Repo (us), RC Submissions WG, RC Repositories WG, pharmaverse, other?)

# Interacting with the repo

## Packages risk filters

::: columns
::: {.column width="50%"}
- Helper package for system administrators
- Restricts packages available for installation to those fitting in a policy
- Uses packages metadata in the repo
- May be use together with manual checks (e.g. read a statistical review)
:::
::: {.column width="50%"}
- Example of automated filter for safety-critical activities:
  - Acceptance Criteria 1: “Code Coverage > 95% ”
  - Acceptance Criteria 2: “Package documentation available”
:::
:::

::: {.notes}
Yann
:::

## Usage

```{r}
#| echo: false
summarize_available_packages <- function(ap) {
  out <- cbind(ap, data.frame("..." = "..."))
  out <- out[c(1:4, nrow(ap)), c("Package", "...")]
  out[4,] <- c("...", "...")
  rownames(out) <- c("1", "2", "3", "...", nrow(ap))
  out
}
```

::: columns
::: {.column width="40%"}
### Unfiltered
```{r}
#| echo: true
#| eval: false
available.packages()
```
```{r}
#| echo: false
pkgs_nofltr_path <- file.path(here::here(), "resources", "pkgs_nofltr.rds")
pkgs_nofltr <- readRDS(file = pkgs_nofltr_path)
summarize_available_packages(pkgs_nofltr)
```
:::

::: {.column width="60%"}
### Filtered
```{r}
#| echo: true
#| eval: false
fltr <- risk_filter(
  ReverseDependencies >= 0.99)
options(available_packages_filters = fltr)
available.packages()
```
```{r}
#| echo: false
pkgs_fltr_path <- file.path(here::here(), "resources", "pkgs_fltr.rds")
pkgs_fltr <- readRDS(file = pkgs_fltr_path)
summarize_available_packages(pkgs_fltr)
```
:::
:::

::: {.notes}
Yann
:::

# Repository ‘back-end’

## Repository forked from `r-hub/repos`

![](resources/repos_pkgs.png)

::: {.notes}
Yann
:::

## Packages cohort validation

* Risk metrics calculated on packages with new versions and on their reverse dependencies
* Uses the GitHub API to fetch new release assets

```{r}
#| echo: false
df_pkg_metrics <- readRDS(file = file.path(
  here::here(), "resources", "df_pkg_metrics.rds"))
df_pkg_metrics$pkg_score <- round(df_pkg_metrics$pkg_score, 4)
df_pkg_metrics[1:3,
  c("package", "version", "ver_old", "pkg_score", "has_news")]
```

::: {.notes}
Yann
:::

# Our roadmap

## What's next

* (NOTE: STAGE 1: Pipeline Integration)

# Closing

## R Consortium Impact

<div class="image-container">
  <img src="resources/r-ladies-logo.png">
  <img src="resources/latinr-logo.png">
  <img src="resources/r-medicine-logo.png">
  <img src="resources/useR-logo.png">
  <img src="resources/covid-19-data-forum.png">
</div>

<style>
.image-container {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.image-container img {
  margin: 5px;
  max-width: 150px;  /* Adjust the size of the images as needed */
}
</style>

* Community Grants and Sponsorships Over USD $1.4 Million
* Organize large scale collaborative projects: R Validation Hub, R-Ladies
* Co-host multidisciplinary data science forums: Stanford Data Institute
* Direct support for key R events: R/Medicine, R/Pharma, useR!, LatinR, more
* Direct worldwide support for R User Groups

## Join us

![](rc-logo.png){width=300}

* Help guide the future direction of the R language
* Collaborate on cross industry initiatives
* Raise your leadership profile in the R Community
* Protect your investment in R while supporting the common good

* (NOTE: link to GH join us issue, add R Consortium info)


## Thank you

* (NOTE: list of Core team members)
